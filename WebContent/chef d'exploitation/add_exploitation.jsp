<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
	pageEncoding="ISO-8859-1" import="ma.connexion.*" import="java.sql.*"%>
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Add an exploitation</title>
<link href="../css/styles.css" rel="stylesheet" type="text/css"
	media="screen" />
<link href="../css/menu1.css" rel="stylesheet" type="text/css"
	media="screen" />
</head>
<body>
	<%@ include file="en_tete.jsp"%>
	<%
		Connect connexion = new Connect();
		String requet = "";
		String exploitation = request.getParameter("slt");
		int valeur = Integer.parseInt(exploitation);
		String surface = request.getParameter("surface" + valeur);
		String code_ferme = request.getParameter("code_ferme" + valeur);

		String code = request.getParameter("code" + valeur);

		String nbr_parcelle = request.getParameter("nbr_parcelle");
		String nom = request.getParameter("nom_exp");
		String nbr_secteur = request.getParameter("nbr_secteur");
		String tel = request.getParameter("tel_exp");
		String resp = request.getParameter("resp_exp");
		String adresse = request.getParameter("adresse_exp");
		String description = request.getParameter("desc_exp");
		String source_eau = request.getParameter("eauList");
		String source_energie = request.getParameter("energieList");
		;
		String btn1 = request.getParameter("btn1");

		String surf_cult = request.getParameter("surface_cultuve");
		String nbr_serre = request.getParameter("nbr_serre");
		String surf_ncult = request.getParameter("surface_ncultuve");

		String code_parcelle = request.getParameter("code_parcelle");

		String requet3 = "insert into serre values('" + code + "','" + code_parcelle + "','" + surface + "')";
		String requet1 = "insert into ferme values('" + code + "','" + nom + "','" + adresse + "','" + tel + "','"
				+ description + "','" + nbr_parcelle + "','" + nbr_secteur + "','" + resp + "')";
		String requet_1 = "insert into source_d_eau(CODEFERME,TYPE_EAU) values('" + code + "','" + source_eau
				+ "')";
		String requet_1_2 = "insert into source_energie(CODEFERME,TYPE_ENERGIE) values('" + code + "','"
				+ source_energie + "')";
		String requet2 = "insert into parcelle  values('" + code + "','" + code_ferme + "','" + surface + "','"
				+ surf_cult + "','" + nbr_serre + "','" + surf_ncult + "')";

		switch (valeur) {
		case 1:
			requet = requet1;
			break;
		case 2:
			requet = requet2;
			break;
		case 3:
			requet = requet3;
			break;
		default:
			out.println("Error");
		}
		if (valeur == 1) {
			try {
				connexion.setData(requet_1);
				connexion.setData(requet_1_2);
			} catch (Exception ex) {
				out.println(ex);
			}
		}
		try {

			connexion.setData(requet);
			out.println("data are saved");
		} catch (Exception o) {
			out.println(o);
		}
	%>
	<%@ include file="menu.jsp"%>
	<%@ include file="../pied.jsp"%>
</body>
</html>